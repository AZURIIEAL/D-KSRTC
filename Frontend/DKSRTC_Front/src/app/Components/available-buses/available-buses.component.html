<app-navbar></app-navbar>

<div class="table-container">
  <h1>Explore Available Buses</h1>
  <p>Discover a wide range of buses for your journey.</p>

  <table>
    <thead>
      <tr class="table-header">
        <th *ngFor="let key of keys">{{ key }}</th>
      </tr>
    </thead>
    <tbody>
      <tr *ngFor="let bus of availableBuses | async">
        <td>{{ bus.busName }}</td>
        <td>{{ bus.time | date : "shortTime" }}</td>
        <td>{{ bus.distance }} km</td>
        <td>{{ bus.categoryName }}</td>
        <td>{{ bus.typeName }}</td>
        <td>{{ bus.seatAvailability }}</td>
        <td>â‚¹ {{ bus.perDistanceFare * bus.distance + bus.baseFare }}</td>
        <td *ngIf="isLoggedIn">
          <button
            type="button"
            [routerLink]="['/book-seats']"
            [queryParams]="{
              selectedBusId: bus.busId,
              perTicketPrice: (bus.perDistanceFare * bus.distance) + bus.baseFare,
              busRouteId:bus.busRouteCurrent,
              journeyDate:onDate
            }"
            class="view-seats-button"
          >
            View Seats
          </button>
        </td>
        <td *ngIf="!isLoggedIn">
          <button
            type="button"
            (click)="AlertLogin()"
            class="view-seats-button"
          >
            View Seats
          </button>
        </td>
      </tr>
    </tbody>
  </table>
</div>
